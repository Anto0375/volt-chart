
<!DOCTYPE html>
<html>
<head>
  <title>Chart.js Example</title>
  <script src="chart.umd.min.js"></script>
</head>
<body>
  <canvas id="myChart" style="width: 100%; height: 300px;"></canvas>

  <script>
    function drawChart(dataLabels, dataValues) {
      const ctx = document.getElementById('myChart').getContext('2d');
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: dataLabels,
          datasets: [{
            label: 'Sales',
            data: dataValues,
            backgroundColor: 'rgba(75, 192, 192, 0.6)'
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { position: 'top' },
            title: { display: true, text: 'Dynamic Chart from Volt MX' }
          }
        }
      });
    }

    window.addEventListener("message", function (event) {
      try {
        const payload = JSON.parse(event.data);
        drawChart(payload.labels, payload.values);
      } catch (e) {
        console.error("Invalid message:", e);
      }
    });

    drawChart(["Jan", "Feb", "Mar"], [1000, 2000, 3000]);
  </script>
</body>
</html>
